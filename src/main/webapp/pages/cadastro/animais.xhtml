<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:composition template="/pages/template.xhtml">
        <ui:define name="content">

            <div id="dialog-buscar-cliente" title="Localizar Cliente" style="display: none;">
                <div class="application box">
                    <div class="barraTitulo">
                        <h2>Buscar Cliente</h2>
                    </div>
                    <div id="erroModalCliente"></div>
                    <div>
                        <table style="width: 100%">
                            <tr>
                                <td style="text-align: left;">
                                    <label>CPF</label>
                                </td>
                                <td style="text-align: left;">
                                    <label>Nome</label>
                                </td>
                                <td style="text-align: left;">
                                    <label>Telefone</label>
                                </td>
                            </tr>
                            <tr>
                                <td style="width: 9%;">
                                    <h:inputText size="14" value="#{animaisController.cpf}"/>
                                </td>
                                <td style="width: 51%;">
                                    <h:inputText size="100" value="#{animaisController.nomeCliente}"/>
                                </td>                                
                                <td style="width: 12%;">
                                    <h:inputText size="20" value="#{animaisController.telefoneBusca}"/>
                                </td>
                                <td style="text-align: left;">
                                    <button type="button" class="buscar16x16" title="Buscar Cliente" ></button>
                                </td>
                            </tr>
                        </table>
                        <br />
                        <div class="barraTitulo">
                            <h2>Clientes</h2>
                        </div>
                        <div id="gridClientes" style="overflow: auto; height: 300px;">
                            <p:dataTable var="cliente" value="#{animaisController.listaClientes}" style="float : left;" scrollable="true" scrollHeight="200">  
                                <p:column headerText="ID" style="height: 10px; font-size: 10px; text-align: center; width: 50px;">  
                                    <h:outputText value="#{cliente.idCliente}"/>  
                                </p:column>  
                                <p:column headerText="Nome" style="height: 10px; font-size: 10px; width: 300px;">  
                                    <h:outputText value="#{cliente.nomeCliente}" />  
                                </p:column> 
                                <p:column headerText="CPF" style="height: 10px; font-size: 10px; text-align: center;">  
                                    <h:outputText value="#{cliente.cpf}" />  
                                </p:column>           
                                <p:column headerText="Tel. Residencial" style="height: 10px; font-size: 10px; text-align: center;">  
                                    <h:outputText value="#{cliente.telefoneResidencial}" />  
                                </p:column>                               
                                <p:column headerText="Tel. Celular" style="height: 10px; font-size: 10px; text-align: center;">  
                                    <h:outputText value="#{cliente.telefoneCelular}" />  
                                </p:column>                   
                                <p:column headerText="Editar" style="height: 10px; font-size: 10px; text-align: center; width: 50px;">
                                    <h:commandLink action="#{animaisController.selecionarCliente(cliente)}">
                                        <img class="img" src="/SAVA/faces/imagens/selecionar32x32.png" border="1"/>                           
                                    </h:commandLink>
                                </p:column>           
                            </p:dataTable> 
                        </div>
                    </div>
                </div>
            </div>

            <p:panel id="panelAnimais" style="height: 550px;" header="Cadastro de Animais" toggleable="false" closable="false" 
                     toggleSpeed="500" closeSpeed="500" widgetVar="panelCadastroAnimal"> 

                <div id="divMessagesAnimal" >
                    <p:growl id="mensagensAnimais" showDetail="true" />
                </div>

<!--                <div id="modalBuscarCliente" rendered="#{animaisController.modalBuscarCliente}" class="application box">
                    <div class="title">
                        <h2>Buscar Cliente</h2>
                    </div>
                </div>-->

                <p:outputPanel rendered="#{animaisController.mostrarLista}">
                    <div class="botoes" style="display: block;">
                        <div class="divBtn">
                            <!--<h:commandLink action="#{animaisController.abrirModalBuscarCliente()}">-->
                            <h:commandLink onclick="$('#dialog-buscar-cliente').dialog();">
                                <img class="img" src="/SAVA/faces/imagens/buscar.png" border="1"/>
                            </h:commandLink>
                            <span class="txtBtn">Buscar Cliente</span>
                        </div>
                        <div class="divBtn">
                            <h:commandLink action="#{animaisController.novo()}">
                                <img class="img" src="/SAVA/faces/imagens/novo.png" border="1"/>
                            </h:commandLink>
                            <span class="txtBtn">Novo</span>
                        </div>
                    </div>
                    <p:separator />
                </p:outputPanel>

                <p:outputPanel rendered="#{animaisController.mostrarFormulario}">
                    <div class="botoes">
                        <div class="divBtn">
                            <h:commandLink action="#{animaisController.salvarAnimal()}" styleClass="salvar">
                                <img class="img" src="/SAVA/faces/imagens/salvar.png" border="1"/>
                            </h:commandLink>
                            <span class="txtBtn">Salvar</span>
                        </div> 
                        <div class="divBtn">
                            <h:commandLink action="#{animaisController.cancelar()}" >
                                <img class="img" src="/SAVA/faces/imagens/cancelar.png" border="1"/>
                            </h:commandLink>
                            <span class="txtBtn">Cancelar</span>
                        </div>
                    </div>   
                    <p:separator />
                </p:outputPanel>

                <p:outputPanel rendered="#{animaisController.mostrarLista}" >  
                    <div class="divBorda">
                        <div class="barraTitulo">
                            <h1 class="titulo">Cliente</h1>
                        </div>
                        <table style="width:100%">
                            <tr>
                                <td><label>ID</label></td>
                                <td><label>Nome Cliente</label></td>
                                <td><label>CPF</label></td>
                                <td><label>Telefone Residencial</label></td>
                                <td><label>Telefone Celular</label></td>
                            </tr>
                            <tr>
                                <td style="width: 5%;">
                                    <h:inputText id="idCliente" size="5" value="#{animaisController.idCliente}" disabled="true"/>
                                </td>
                                <td style="width: 51%;">
                                    <h:inputText id="nomeCliente" size="100" value="#{animaisController.nomeCliente}" disabled="true"/>
                                </td>
                                <td style="width: 9%;">
                                    <h:inputText id="cpf" size="14" value="#{animaisController.cpf}" disabled="true"/>
                                </td>
                                <td style="width: 12%;">
                                    <h:inputText id="telefoneResidencial" size="20" value="#{animaisController.telefoneResidencial}" disabled="true"/>
                                </td>
                                <td style="width: 23%;">
                                    <h:inputText id="telefoneCelular" size="20" value="#{animaisController.telefoneCelular}" disabled="true"/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </p:outputPanel>

                <p:outputPanel rendered="#{animaisController.mostrarFormulario}" >  
                    <h:inputHidden value="#{animaisController.idAnimal}"/>
                    <h:inputHidden value="#{animaisController.idCliente}"/>
                    <table style="width:100%">
                        <tr>
                            <td><label>Espécie</label></td>
                            <td><label>Raça</label></td>
                        </tr>
                        <tr>
                            <td style="width: 15%;">
                                <p:selectOneMenu id="especie" value="#{animaisController.especie}">
                                    <f:selectItem itemLabel="Selecione..." itemValue="" />
                                    <f:selectItems value="#{animaisController.listaEspecies}" var="especie" itemValue="#{especie}" itemLabel="#{especie.descricaoEspecie}"/>
                                    <p:ajax listener="#{animaisController.buscarRacaPorIdEspecie(idEspecie)}" />
                                </p:selectOneMenu>
                            </td>
                            <td style="width: 85%;">
                                <p:selectOneMenu id="raca" value="#{animaisController.raca}" >
                                    <f:selectItem itemLabel="Selecione..." itemValue="" />
                                    <f:selectItems value="#{animaisController.listaRacas}" var="raca" itemValue="#{raca}" itemLabel="#{raca.descricaoRaca}"/>
                                </p:selectOneMenu>
                            </td>
                        </tr>
                    </table>
                </p:outputPanel>

            </p:panel>

        </ui:define>
    </ui:composition>
</html>

